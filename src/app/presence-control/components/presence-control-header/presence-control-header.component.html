<div class="header-nav">
  <button
    class="previous-lesson btn btn-link"
    (click)="previousLesson.emit()"
    [disabled]="!lesson || !hasPreviousLesson"
    [attr.aria-label]="'presence-control.header.previous-lesson' | translate"
  >
    <i class="material-icons">navigate_before</i>
  </button>
  <div class="header-info">
    <div class="header-info-content">
      <div class="header-info-datetime">
        <button class="btn btn-link" (click)="d.toggle()">
          <i class="material-icons">calendar_today</i>
        </button>
        <input
          class="header-info-date"
          [ngModel]="selectDate"
          (ngModelChange)="selectDateChange.emit($event)"
          ngbDatepicker
          #d="ngbDatepicker"
        />
        <div *ngIf="lesson">
          {{ lesson.LessonDateTimeFrom | date: 'HH:mm' }}â€“{{
            lesson.LessonDateTimeTo | date: 'HH:mm'
          }}
        </div>
      </div>
      <div *ngIf="lesson" class="header-info-lesson">
        {{ lesson.EventDesignation }},
        {{ lesson.StudyClassNumber }}
      </div>
    </div>
  </div>
  <button
    class="next-lesson btn btn-link"
    (click)="nextLesson.emit()"
    [disabled]="!lesson || !hasNextLesson"
    [attr.aria-label]="'presence-control.header.next-lesson' | translate"
  >
    <i class="material-icons">navigate_next</i>
  </button>
</div>

<div class="header-states py-3">
  <div class="header-state present">
    <i class="material-icons">check_circle</i>
    <span class="count">{{ presentCount != null ? presentCount : '?' }}</span>
  </div>
  <div class="header-state absent">
    <i class="material-icons">cancel</i>
    <span class="count">{{ absentCount != null ? absentCount : '?' }}</span>
  </div>
  <div class="header-state late">
    <i class="material-icons">watch_later</i>
    <span class="count">{{ lateCount != null ? lateCount : '?' }}</span>
  </div>
</div>

<div class="header-searchviews pt-3">
  <div class="header-search input-group">
    <div class="input-group-prepend">
      <span class="input-group-text" id="search-addon"
        ><i class="material-icons">search</i></span
      >
    </div>
    <input
      type="text"
      class="form-control"
      [value]="search"
      [disabled]="!lesson"
      [attr.placeholder]="'presence-control.header.search-by-name' | translate"
      [attr.aria-label]="'presence-control.header.search' | translate"
      aria-describedby="search-addon"
      (keyup)="searchChange.emit($event.target.value)"
    />
  </div>
  <div class="header-views">
    <button
      *ngFor="let option of viewModeOptions"
      class="header-view btn"
      [disabled]="!lesson"
      [class.btn-secondary]="option.viewMode === viewMode"
      [class.btn-link]="option.viewMode !== viewMode"
      [class.active]="option.viewMode === viewMode"
      (click)="viewModeChange.emit(option.viewMode)"
    >
      <i class="material-icons align-middle">{{ option.icon }}</i>
    </button>
  </div>
</div>
