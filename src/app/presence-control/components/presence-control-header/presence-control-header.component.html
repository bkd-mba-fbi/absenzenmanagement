<div class="navigation">
  <button
    type="button"
    class="previous-lesson btn btn-link"
    [class.disabled]="!hasPreviousLesson"
    (click)="selectPreviousLesson()"
    [disabled]="!lesson"
    [attr.aria-label]="'presence-control.header.previous-lesson' | translate"
  >
    <i class="material-icons">navigate_before</i>
  </button>

  <div class="lesson-date">
    <button type="button" class="btn btn-link" (click)="d.toggle()">
      <i class="material-icons">calendar_today</i>
    </button>
    <input
      class="lesson-date-input"
      [ngModel]="selectDate"
      (ngModelChange)="selectDateChange.emit($event)"
      ngbDatepicker
      #d="ngbDatepicker"
    />
  </div>

  <div *ngIf="lesson" class="lesson-time">
    {{ lesson.LessonDateTimeFrom | date: 'HH:mm' }}â€“<span
      class="lesson-time-to"
      >{{ lesson.LessonDateTimeTo | date: 'HH:mm' }}</span
    >
  </div>

  <div *ngIf="lesson" class="lesson-description">
    {{ lesson.EventDesignation }}, {{ lesson.StudyClassNumber }}
  </div>

  <button
    type="button"
    class="next-lesson btn btn-link"
    [class.disabled]="!hasNextLesson"
    (click)="selectNextLesson()"
    [disabled]="!lesson"
    [attr.aria-label]="'presence-control.header.next-lesson' | translate"
  >
    <i class="material-icons">navigate_next</i>
  </button>
</div>

<div class="states">
  <div class="state present">
    <i class="material-icons">check_circle</i>
    <span class="count">{{ presentCount != null ? presentCount : '?' }}</span>
  </div>
  <div class="state absent">
    <i class="material-icons">cancel</i>
    <span class="count">{{ absentCount != null ? absentCount : '?' }}</span>
  </div>
  <div class="state late">
    <i class="material-icons">watch_later</i>
    <span class="count">{{ lateCount != null ? lateCount : '?' }}</span>
  </div>
</div>

<div class="search-and-views">
  <div class="search input-group">
    <div class="input-group-prepend">
      <span class="input-group-text" id="search-addon"
        ><i class="material-icons">search</i></span
      >
    </div>
    <input
      type="text"
      class="form-control"
      [value]="search"
      [disabled]="!lesson"
      [attr.placeholder]="'presence-control.header.search-by-name' | translate"
      [attr.aria-label]="'presence-control.header.search' | translate"
      aria-describedby="search-addon"
      (keyup)="searchChange.emit($event.target.value)"
    />
  </div>
  <div class="views">
    <button
      type="button"
      *ngFor="let option of viewModeOptions"
      class="view btn"
      [disabled]="!lesson"
      [class.btn-secondary]="option.viewMode === viewMode"
      [class.btn-link]="option.viewMode !== viewMode"
      [class.active]="option.viewMode === viewMode"
      (click)="viewModeChange.emit(option.viewMode)"
    >
      <i class="material-icons align-middle">{{ option.icon }}</i>
    </button>
  </div>
</div>
