!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=u(t);if(e){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{Muja:function(t,e,n){"use strict";var r=n("EqEh");e.a=function(t,e){return Object(r.a)(t,e)}},wbm3:function(e,r,c){"use strict";c.r(r),c.d(r,"EvaluateAbsencesModule",(function(){return ft}));var s,u,l,f=c("PCNd"),b=c("tyNb"),d=c("1G5W"),h=c("CCnw"),p=c("CqUA"),v=c("NPit"),g=c("fhBx"),y=c("Xr/R"),m=c("fXoL"),P=c("ofXK"),O=((s=function(t){o(r,t);var e=a(r);function r(t,i,o,c){var a;return n(this,r),(a=e.call(this,t,i,o,"/evaluate-absences")).lessonPresenceService=c,a.queryParamsString$.pipe(Object(d.a)(a.destroy$)).subscribe((function(t){return a.confirmBackLinkParams={returnparams:t}})),a}return i(r,[{key:"getInitialFilter",value:function(){return{student:null,educationalEvent:null,studyClass:null}}},{key:"isValidFilter",value:function(t){return Boolean(t.student||t.educationalEvent||t.studyClass)}},{key:"getInitialSorting",value:function(){return{key:"StudentFullName",ascending:!0}}},{key:"loadEntries",value:function(t,e,n){return this.loadingService.load(this.lessonPresenceService.getStatistics(t,e,n),g.a)}},{key:"buildParamsFromFilter",value:function(t){return Object(v.a)(t)}}]),r}(g.b)).\u0275fac=function(t){return new(t||s)(m.Xb(P.i),m.Xb(p.a),m.Xb(y.a),m.Xb(h.a))},s.\u0275prov=m.Gb({token:s,factory:s.\u0275fac}),s),C=c("qUtt"),k=((u=function(){function t(e){n(this,t),this.state=e}return i(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||u)(m.Kb(O))},u.\u0275cmp=m.Eb({type:u,selectors:[["erz-evaluate-absences"]],features:[m.wb([O,{provide:C.a,useExisting:O}])],decls:1,vars:0,template:function(t,e){1&t&&m.Lb(0,"router-outlet")},directives:[b.i],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),u),j=c("lJxs"),S=c("IzEk"),x=c("yl8S"),w=c("KJh6"),E=c("EOpz"),$=c("mmcK"),I=c("vjgy"),F=c("4vbw"),R=c("jSy9"),M=c("sYmb"),A=((l=function(){function t(e,r,i){n(this,t),this.studentsService=e,this.educationalEventsService=r,this.studyClassesService=i,this.filter={student:null,educationalEvent:null,studyClass:null},this.filterChange=new m.n}return i(t,[{key:"ngOnInit",value:function(){}},{key:"show",value:function(){this.filterChange.emit(this.filter)}}]),t}()).\u0275fac=function(t){return new(t||l)(m.Kb($.a),m.Kb(I.a),m.Kb(F.a))},l.\u0275cmp=m.Eb({type:l,selectors:[["erz-evaluate-absences-header"]],inputs:{filter:"filter"},outputs:{filterChange:"filterChange"},decls:20,vars:18,consts:[[1,"filters","mb-2"],[1,"form-group"],[3,"typeaheadService","value","valueChange"],[1,"buttons"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(m.Pb(0,"div",0),m.Pb(1,"div",1),m.Pb(2,"label"),m.Ec(3),m.ec(4,"translate"),m.Ob(),m.Pb(5,"erz-typeahead",2),m.bc("valueChange",(function(t){return e.filter.student=t})),m.Ob(),m.Ob(),m.Pb(6,"div",1),m.Pb(7,"label"),m.Ec(8),m.ec(9,"translate"),m.Ob(),m.Pb(10,"erz-typeahead",2),m.bc("valueChange",(function(t){return e.filter.educationalEvent=t})),m.Ob(),m.Ob(),m.Pb(11,"div",1),m.Pb(12,"label"),m.Ec(13),m.ec(14,"translate"),m.Ob(),m.Pb(15,"erz-typeahead",2),m.bc("valueChange",(function(t){return e.filter.studyClass=t})),m.Ob(),m.Ob(),m.Pb(16,"div",3),m.Pb(17,"button",4),m.bc("click",(function(){return e.show()})),m.Ec(18),m.ec(19,"translate"),m.Ob(),m.Ob(),m.Ob()),2&t&&(m.xb(3),m.Fc(m.fc(4,10,"evaluate-absences.header.student")),m.xb(2),m.jc("typeaheadService",e.studentsService)("value",e.filter.student),m.xb(3),m.Fc(m.fc(9,12,"evaluate-absences.header.module-instance")),m.xb(2),m.jc("typeaheadService",e.educationalEventsService)("value",e.filter.educationalEvent),m.xb(3),m.Fc(m.fc(14,14,"evaluate-absences.header.study-class")),m.xb(2),m.jc("typeaheadService",e.studyClassesService)("value",e.filter.studyClass),m.xb(3),m.Gc(" ",m.fc(19,16,"evaluate-absences.header.show")," "))},directives:[R.a],pipes:[M.c],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;padding:1.5rem;border-bottom:1px solid #dee2e6}.filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.form-group[_ngcontent-%COMP%]{flex:1;min-width:20rem;max-width:40rem;margin-right:1.5rem;margin-bottom:.75rem}.buttons[_ngcontent-%COMP%]{flex:none;margin-top:2.75rem;margin-right:0}@media (max-width:767.98px){.buttons[_ngcontent-%COMP%]{width:100%;margin-top:1.5rem;margin-bottom:1.5rem}}"],changeDetection:0}),l),_=c("dlKe"),z=c("4Kj8");function L(t,e){if(1&t){var n=m.Qb();m.Pb(0,"th",13),m.bc("click",(function(){m.uc(n);var t=e.$implicit;return m.dc(5).state.toggleSorting(t.key)})),m.Pb(1,"div",14),m.Pb(2,"div",15),m.Ec(3),m.ec(4,"translate"),m.Ob(),m.Pb(5,"div",16),m.Ec(6),m.ec(7,"async"),m.Ob(),m.Ob(),m.Ob()}if(2&t){var r=e.$implicit,i=m.dc(5);m.jc("ngClass",r.label),m.xb(3),m.Gc(" ",m.fc(4,3,"evaluate-absences.list.header."+r.label)," "),m.xb(3),m.Gc(" ",m.fc(7,5,i.getSortingChar$(r))," ")}}var K=function(t){return["student",t]},N=function(t){return{returnparams:t}};function T(t,e){if(1&t&&(m.Pb(0,"a",20),m.ec(1,"async"),m.Ec(2),m.Ob()),2&t){var n=m.dc().$implicit,r=m.dc().$implicit,i=m.dc(6);m.jc("routerLink",m.nc(5,K,r.StudentRef.Id))("queryParams",m.nc(7,N,m.fc(1,3,i.profileReturnParams$))),m.xb(2),m.Gc(" ",r[n.key]," ")}}function G(t,e){if(1&t&&m.Ec(0),2&t){var n=m.dc().$implicit,r=m.dc().$implicit;m.Gc(" ",r[n.key]," ")}}function X(t,e){if(1&t&&(m.Pb(0,"td"),m.ec(1,"translate"),m.Cc(2,T,3,9,"a",18),m.Cc(3,G,1,1,"ng-template",null,19,m.Dc),m.Ob()),2&t){var n=e.$implicit,r=m.tc(4);m.yb("data-label",m.fc(1,3,"evaluate-absences.list.header."+n.label)),m.xb(2),m.jc("ngIf","StudentFullName"===n.key)("ngIfElse",r)}}function D(t,e){if(1&t&&(m.Pb(0,"tr"),m.Cc(1,X,5,5,"td",17),m.Ob()),2&t){var n=m.dc(6);m.xb(1),m.jc("ngForOf",n.columns)}}function q(t,e){if(1&t&&(m.Pb(0,"tbody"),m.Cc(1,D,2,1,"tr",17),m.Ob()),2&t){var n=m.dc(4).erzLet;m.xb(1),m.jc("ngForOf",n.entries)}}function H(t,e){1&t&&m.Lb(0,"erz-spinner",21)}function J(t,e){if(1&t){var n=m.Qb();m.Pb(0,"button",22),m.bc("click",(function(){return m.uc(n),m.dc(5).state.nextPage()})),m.Ec(1),m.ec(2,"translate"),m.Ob()}2&t&&(m.xb(1),m.Gc(" ",m.fc(2,1,"global.pagination.load-more")," "))}function Q(t,e){if(1&t){var n=m.Qb();m.Pb(0,"div",7),m.Pb(1,"table",8),m.bc("scrolled",(function(){return m.uc(n),m.dc(4).onScroll()})),m.Pb(2,"thead"),m.Pb(3,"tr"),m.Cc(4,L,8,7,"th",9),m.Ob(),m.Ob(),m.Cc(5,q,2,1,"tbody",10),m.Ob(),m.Cc(6,H,1,0,"erz-spinner",11),m.Cc(7,J,3,3,"button",12),m.Ob()}if(2&t){var r=m.dc(3).erzLet,i=m.dc();m.xb(4),m.jc("ngForOf",i.columns),m.xb(1),m.jc("ngIf",r.entries&&r.entries.length>0),m.xb(1),m.jc("ngIf",r.loadingPage),m.xb(1),m.jc("ngIf",r.hasMore&&!r.loadingPage)}}function U(t,e){1&t&&(m.Pb(0,"p",23),m.Ec(1),m.ec(2,"translate"),m.Ob()),2&t&&(m.xb(1),m.Gc(" ",m.fc(2,1,"evaluate-absences.no-entries")," "))}function V(t,e){if(1&t&&(m.Nb(0),m.Cc(1,Q,8,4,"div",5),m.Cc(2,U,3,3,"ng-template",null,6,m.Dc),m.Mb()),2&t){var n=m.tc(3),r=m.dc(2).erzLet;m.xb(1),m.jc("ngIf",r.entries&&r.entries.length>0||r.loadingPage)("ngIfElse",n)}}function B(t,e){1&t&&m.Lb(0,"erz-spinner")}function W(t,e){if(1&t&&(m.Nb(0),m.Cc(1,V,4,2,"ng-container",2),m.ec(2,"async"),m.Cc(3,B,1,0,"ng-template",null,4,m.Dc),m.Mb()),2&t){var n=m.tc(4),r=m.dc(2);m.xb(1),m.jc("ngIf",!m.fc(2,2,r.state.loading$))("ngIfElse",n)}}function Y(t,e){1&t&&(m.Pb(0,"p",23),m.Ec(1),m.ec(2,"translate"),m.Ob()),2&t&&(m.xb(1),m.Fc(m.fc(2,1,"evaluate-absences.no-filter")))}function Z(t,e){if(1&t){var n=m.Qb();m.Nb(0),m.Pb(1,"erz-evaluate-absences-header",1),m.bc("filterChange",(function(t){return m.uc(n),m.dc().state.setFilter(t)})),m.ec(2,"async"),m.Ob(),m.Cc(3,W,5,4,"ng-container",2),m.ec(4,"async"),m.Cc(5,Y,3,3,"ng-template",null,3,m.Dc),m.Mb()}if(2&t){var r=m.tc(6),i=m.dc();m.xb(1),m.jc("filter",m.fc(2,3,i.filterFromParams$)),m.xb(2),m.jc("ngIf",m.fc(4,5,i.state.isFilterValid$))("ngIfElse",r)}}var tt,et=function(t,e,n){return{entries:t,hasMore:e,loadingPage:n}},nt=((tt=function(){function e(t,r,i,o){n(this,e),this.state=t,this.scrollPosition=r,this.route=i,this.presenceTypesService=o,this.columns=[{key:"StudentFullName",label:"student"},{key:"TotalAbsences",label:"total"},{key:"TotalAbsencesValidExcuse",label:"valid-excuse"},{key:"TotalAbsencesWithoutExcuse",label:"without-excuse"},{key:"TotalAbsencesUnconfirmed",label:"unconfirmed"},{key:"TotalIncidents",label:"incident"}],this.filterFromParams$=this.route.queryParams.pipe(Object(j.a)(rt)),this.profileReturnParams$=this.state.queryParamsString$}return i(e,[{key:"ngOnInit",value:function(){var e=this;this.filterFromParams$.pipe(Object(S.a)(1)).subscribe((function(t){return e.state.setFilter(t)})),this.presenceTypesService.halfDayActive$.subscribe((function(n){n&&(e.columns=[].concat(t(e.columns),[{key:"TotalHalfDays",label:"halfday"}]))}))}},{key:"ngAfterViewInit",value:function(){this.scrollPosition.restore()}},{key:"onScroll",value:function(){this.state.nextPage()}},{key:"getSortingChar$",value:function(t){return this.state.sorting$.pipe(Object(j.a)((function(e){return e&&t.key===e.key?e.ascending?"\u2193":"\u2191":""})))}}]),e}()).\u0275fac=function(t){return new(t||tt)(m.Kb(O),m.Kb(x.a),m.Kb(b.a),m.Kb(w.a))},tt.\u0275cmp=m.Eb({type:tt,selectors:[["erz-evaluate-absences-list"]],decls:4,vars:11,consts:[[4,"erzLet"],[3,"filter","filterChange"],[4,"ngIf","ngIfElse"],["noFilter",""],["loading",""],["class","p-3",4,"ngIf","ngIfElse"],["noEntries",""],[1,"p-3"],["infiniteScroll","",1,"table","table-striped","table-fixed",3,"scrolled"],["scope","col",3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngIf"],["class","inline",4,"ngIf"],["type","button","class","btn btn-secondary btn-sm d-block mx-auto",3,"click",4,"ngIf"],["scope","col",3,"ngClass","click"],[1,"d-flex"],[1,"column-title"],[1,"sort-direction"],[4,"ngFor","ngForOf"],["class","student",3,"routerLink","queryParams",4,"ngIf","ngIfElse"],["noLink",""],[1,"student",3,"routerLink","queryParams"],[1,"inline"],["type","button",1,"btn","btn-secondary","btn-sm","d-block","mx-auto",3,"click"],[1,"mt-3","px-3"]],template:function(t,e){1&t&&(m.Cc(0,Z,7,7,"ng-container",0),m.ec(1,"async"),m.ec(2,"async"),m.ec(3,"async")),2&t&&m.jc("erzLet",m.pc(7,et,m.fc(1,1,e.state.entries$),m.fc(2,3,e.state.hasMore$),m.fc(3,5,e.state.loadingPage$)))},directives:[E.a,A,P.m,_.a,P.l,P.k,b.g,z.a],pipes:[P.b,M.c],styles:["th[_ngcontent-%COMP%]{cursor:pointer}th.student[_ngcontent-%COMP%]{width:30%}.column-title[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}a.student[_ngcontent-%COMP%]{color:#33333d}"],changeDetection:0}),tt);function rt(t){return{student:t.student?Number(t.student):null,educationalEvent:t.educationalEvent?Number(t.educationalEvent):null,studyClass:t.studyClass?Number(t.studyClass):null}}var it,ot,ct=c("ccj6"),at=c("hH5/"),st=[{path:"",component:k,children:[{path:"",component:nt,data:{restoreScrollPositionFrom:["/evaluate-absences/student/:id"]}},{path:"student/:id",children:[{path:"",component:ct.a},{path:"confirm",component:at.a}]}]}],ut=((it=function t(){n(this,t)}).\u0275mod=m.Ib({type:it}),it.\u0275inj=m.Hb({factory:function(t){return new(t||it)},imports:[[b.h.forChild(st)],b.h]}),it),lt=c("0HM3"),ft=((ot=function t(){n(this,t)}).\u0275mod=m.Ib({type:ot}),ot.\u0275inj=m.Hb({factory:function(t){return new(t||ot)},providers:[{provide:lt.a,useValue:"/evaluate-absences"}],imports:[[f.a,ut]]}),ot)},yl8S:function(t,e,r){"use strict";r.d(e,"a",(function(){return j}));var c,s=r("tyNb"),u=r("XNiG"),l=r("LRne"),f=r("pLZG"),b=r("lJxs"),d=r("IzEk"),h=r("5+tZ"),p=r("eIep"),v=r("Y6wi"),g=r("UXun"),y=r("1G5W"),m=r("7o/Q"),P=function(){function t(e){n(this,t),this.total=e}return i(t,[{key:"call",value:function(t,e){return e.subscribe(new O(t,this.total))}}]),t}(),O=function(t){o(r,t);var e=a(r);function r(t,i){var o;return n(this,r),(o=e.call(this,t)).total=i,o.count=0,o}return i(r,[{key:"_next",value:function(t){++this.count>this.total&&this.destination.next(t)}}]),r}(m.a),C=r("fXoL"),k=r("ofXK"),j=((c=function(){function t(e,r){var i=this;n(this,t),this.router=e,this.viewportScroller=r,this.scrollPositions={},this.previousRoute=null,this.currentRoute=null,this.currentScrollPosition=[0,0],this.destroy$=new u.a,this.scrollPosition$=this.router.events.pipe(Object(f.a)(x),Object(b.a)(this.getScrollPosition.bind(this))),this.activationEnd$=this.router.events.pipe(Object(f.a)(S)),this.navigationEnd$=this.router.events.pipe(Object(f.a)(w)),this.route$=this.activationEnd$.pipe(Object(d.a)(1)).pipe(Object(h.a)((function(t){return[Object(l.a)(t),i.navigationEnd$.pipe(Object(p.a)((function(){return i.activationEnd$.pipe(Object(d.a)(1))})))]})),Object(v.a)(),Object(b.a)((function(t){return t.snapshot})),Object(g.a)(1)),this.scrollPosition$.pipe(Object(y.a)(this.destroy$)).subscribe((function(t){return i.currentScrollPosition=t})),this.route$.pipe(Object(y.a)(this.destroy$)).subscribe((function(t){i.previousRoute=i.currentRoute,i.currentRoute=t}))}return i(t,[{key:"ngOnDestroy",value:function(){this.destroy$.next()}},{key:"restore",value:function(){var t=this;if(this.currentRoute&&this.requiresStoring(this.currentRoute)){if(this.previousRoute&&this.shouldStoreFor(this.currentRoute,this.previousRoute)){var e=this.getPath(this.currentRoute);this.scrollToPosition(this.scrollPositions[e]||[0,0])}var n=this.currentRoute;this.route$.pipe((function(t){return t.lift(new P(1))}),Object(d.a)(1),Object(y.a)(this.destroy$),Object(f.a)((function(e){return t.shouldStoreFor(n,e)}))).subscribe((function(){var e=t.getPath(n);t.scrollPositions[e]=t.currentScrollPosition}))}}},{key:"getScrollPosition",value:function(){return this.viewportScroller.getScrollPosition()}},{key:"scrollToPosition",value:function(t){this.viewportScroller.scrollToPosition(t)}},{key:"getPath",value:function(t){return t?"/"+t.pathFromRoot.map((function(t){return t.routeConfig&&t.routeConfig.path})).filter((function(t){return t})).join("/"):"/"}},{key:"requiresStoring",value:function(t){return Boolean(t&&t.routeConfig&&t.routeConfig.data&&Array.isArray(t.routeConfig.data.restoreScrollPositionFrom)&&t.routeConfig.data.restoreScrollPositionFrom.length>0)}},{key:"shouldStoreFor",value:function(t,e){return(t&&t.routeConfig&&t.routeConfig.data&&Array.isArray(t.routeConfig.data.restoreScrollPositionFrom)?t.routeConfig.data.restoreScrollPositionFrom:[]).includes(this.getPath(e))}}]),t}()).\u0275fac=function(t){return new(t||c)(C.Xb(s.e),C.Xb(k.t))},c.\u0275prov=C.Gb({token:c,factory:c.\u0275fac,providedIn:"root"}),c);function S(t){return t instanceof s.b}function x(t){return t instanceof s.d}function w(t){return t instanceof s.c}}}])}();