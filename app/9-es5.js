!function(){function e(n,t){return(e=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(n,t)}function n(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=c(e);if(n){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return t(this,r)}}function t(e,n){return!n||"object"!=typeof n&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var t=[],c=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(c=(o=s.next()).done)&&(t.push(o.value),!n||t.length!==n);c=!0);}catch(a){r=!0,i=a}finally{try{c||null==s.return||s.return()}finally{if(r)throw i}}return t}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return i(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return i(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,c=new Array(n);t<n;t++)c[t]=e[t];return c}function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function s(e,n){for(var t=0;t<n.length;t++){var c=n[t];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}function a(e,n,t){return n&&s(e.prototype,n),t&&s(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{sN2L:function(e,n,t){"use strict";t.r(n),t.d(n,"OpenAbsencesModule",(function(){return ae}));var c,i,s=t("PCNd"),l=t("tyNb"),u=t("2Vo4"),d=t("XNiG"),b=t("VRyK"),g=t("itXk"),f=t("UXun"),m=t("lJxs"),p=t("IzEk"),h=t("CCnw"),y=t("CqUA"),O=t("eB9A"),v=t("jiSq"),P=t("j9z6"),C=t("5QKP"),k=t("fXoL"),x=((c=function(){function e(n,t,c){o(this,e),this.lessonPresencesService=n,this.selectionService=t,this.loadingService=c,this.loading$=this.loadingService.loading$,this.search$=new u.a(""),this.updateUnconfirmedAbsences$=new d.a,this.unconfirmedAbsences$=Object(b.a)(this.loadUnconfirmedAbsences(),this.updateUnconfirmedAbsences$).pipe(Object(f.a)(1)),this.entries$=this.unconfirmedAbsences$.pipe(Object(m.a)(P.a),Object(f.a)(1)),this.sortCriteriaSubject$=new u.a({primarySortKey:"date",ascending:!1}),this.sortCriteria$=this.sortCriteriaSubject$.asObservable(),this.sortedEntries$=Object(g.a)([this.entries$,this.sortCriteria$]).pipe(Object(m.a)(Object(O.a)(P.e))),this.filteredEntries$=Object(g.a)([this.sortedEntries$,this.search$]).pipe(Object(m.a)(Object(O.a)(v.a)),Object(f.a)(1)),this.currentDetail=null}return a(e,[{key:"getUnconfirmedAbsences",value:function(e,n){return this.entries$.pipe(Object(m.a)((function(t){var c=t.find((function(t){return t.dateString===e&&t.studentId===n}));return c?c.absences:[]})))}},{key:"toggleSort",value:function(e){var n=this;this.sortCriteriaSubject$.pipe(Object(p.a)(1)).subscribe((function(t){n.sortCriteriaSubject$.next(t.primarySortKey===e?{primarySortKey:e,ascending:!t.ascending}:{primarySortKey:e,ascending:"name"===e})}))}},{key:"updateAfterConfirm",value:function(){var e=this;Object(g.a)([this.unconfirmedAbsences$.pipe(Object(p.a)(1)),this.selectionService.selectedIds$.pipe(Object(p.a)(1))]).pipe(Object(m.a)(Object(O.a)(P.d))).subscribe((function(n){e.selectionService.clear(),e.updateUnconfirmedAbsences$.next(n)}))}},{key:"loadUnconfirmedAbsences",value:function(){return this.loadingService.load(this.lessonPresencesService.getListOfUnconfirmed())}},{key:"confirmBackLink",get:function(){return this.currentDetail?["/open-absences/detail",this.currentDetail.personId,this.currentDetail.date]:["/open-absences"]}}]),e}()).\u0275fac=function(e){return new(e||c)(k.Xb(h.a),k.Xb(C.a),k.Xb(y.a))},c.\u0275prov=k.Gb({token:c,factory:c.\u0275fac}),c),w=t("qUtt"),_=((i=function(){function e(){o(this,e)}return a(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||i)},i.\u0275cmp=k.Eb({type:i,selectors:[["erz-open-absences"]],features:[k.wb([x,{provide:w.a,useExisting:x}])],decls:1,vars:0,template:function(e,n){1&e&&k.Lb(0,"router-outlet")},directives:[l.i],styles:[""],changeDetection:0}),i),M=t("yl8S"),S=t("EOpz"),j=t("ofXK"),$=t("4Kj8"),E=t("sYmb"),A=t("73sZ");function I(e,n){if(1&e){var t=k.Qb();k.Pb(0,"div",17),k.bc("click",(function(){k.uc(t);var e=n.$implicit;return k.dc(4).openAbsencesService.toggleSort(e)})),k.Ec(1),k.ec(2,"translate"),k.Pb(3,"span",18),k.Ec(4),k.Ob(),k.Ob()}if(2&e){var c=n.$implicit,r=k.dc(3).erzLet,i=k.dc();k.jc("className",c),k.xb(1),k.Gc(" ",k.fc(2,3,"open-absences.list.header."+c)," "),k.xb(3),k.Fc(i.getSortDirectionCharacter(r.sortCriteria,c))}}var L=function(e,n){return["detail",e,n]},F=function(e){return{count:e}};function D(e,n){if(1&e){var t=k.Qb();k.Pb(0,"div"),k.Pb(1,"div",19),k.Pb(2,"div",20),k.bc("click",(function(e){k.uc(t);var n=k.tc(4);return k.dc(4).onCheckboxCellClick(e,n)})),k.Pb(3,"input",21,22),k.bc("change",(function(){k.uc(t);var e=n.$implicit;return k.dc(4).selectionService.toggle(e)})),k.ec(5,"async"),k.Ob(),k.Ob(),k.Pb(6,"div",23),k.Pb(7,"a",24),k.Ec(8),k.Ob(),k.Ob(),k.Pb(9,"div",25),k.Ec(10),k.Ob(),k.Pb(11,"div",26),k.Ec(12),k.ec(13,"translate"),k.Ob(),k.Pb(14,"div",27),k.Ec(15),k.ec(16,"translate"),k.Ob(),k.Pb(17,"div",28),k.Ec(18),k.ec(19,"erzDaysDifference"),k.Ob(),k.Pb(20,"div",29),k.Ec(21),k.ec(22,"date"),k.Ob(),k.Ob(),k.Ob()}if(2&e){var c=n.$implicit,r=k.dc(4);k.xb(3),k.jc("checked",k.fc(5,9,r.selectionService.isSelected$(c))),k.xb(4),k.jc("routerLink",k.oc(22,L,c.studentId,c.dateString)),k.xb(1),k.Fc(c.studentFullName),k.xb(2),k.Gc(" ",c.studyClassNumber," "),k.xb(2),k.Gc(" ",k.gc(13,11,r.getLessonsCountKey(c),k.nc(25,F,c.lessonsCount))," "),k.xb(3),k.Hc(" ",c.studyClassNumber,", ",k.gc(16,14,r.getLessonsCountKey(c),k.nc(27,F,c.lessonsCount))," "),k.xb(3),k.Gc(" ",k.fc(19,17,c.date)," "),k.xb(3),k.Fc(k.gc(22,19,c.date,"dd.MM.yyyy"))}}var R=function(){return["name","date"]};function z(e,n){if(1&e){var t=k.Qb();k.Nb(0),k.Pb(1,"div",4),k.Pb(2,"div",5),k.Pb(3,"div",6),k.Pb(4,"span",7),k.Pb(5,"i",8),k.Ec(6,"search"),k.Ob(),k.Ob(),k.Ob(),k.Pb(7,"input",9),k.bc("keyup",(function(e){return k.uc(t),k.dc(3).openAbsencesService.search$.next(e.target.value)})),k.ec(8,"translate"),k.ec(9,"translate"),k.Ob(),k.Ob(),k.Pb(10,"div",10),k.Pb(11,"div",11),k.Ec(12),k.ec(13,"translate"),k.Ob(),k.Pb(14,"a",12),k.Pb(15,"i",8),k.Ec(16,"edit"),k.Ob(),k.Ob(),k.Ob(),k.Ob(),k.Pb(17,"div",13),k.Pb(18,"div",14),k.Cc(19,I,5,5,"div",15),k.Ob(),k.Cc(20,D,23,29,"div",16),k.Ob(),k.Mb()}if(2&e){var c=k.dc(2).erzLet;k.xb(7),k.yb("placeholder",k.fc(8,7,"open-absences.search-by-name-or-class"))("aria-label",k.fc(9,9,"open-absences.search")),k.xb(5),k.Gc(" ",k.gc(13,11,"open-absences.selected",k.nc(14,F,c.selection.length))," "),k.xb(2),k.Cb("disabled",0===c.selection.length),k.xb(5),k.jc("ngForOf",k.mc(16,R)),k.xb(1),k.jc("ngForOf",c.entries)}}function K(e,n){1&e&&(k.Pb(0,"p",30),k.Ec(1),k.ec(2,"translate"),k.Ob()),2&e&&(k.xb(1),k.Fc(k.fc(2,1,"open-absences.noEntries")))}function T(e,n){if(1&e&&(k.Nb(0),k.Cc(1,z,21,17,"ng-container",1),k.ec(2,"async"),k.Cc(3,K,3,3,"ng-template",null,3,k.Dc),k.Mb()),2&e){var t,c=k.tc(4),r=k.dc().erzLet,i=k.dc();k.xb(1),k.jc("ngIf",(null==(t=k.fc(2,2,i.openAbsencesService.sortedEntries$))?null:t.length)>0||(null==r.entries?null:r.entries.length)>0)("ngIfElse",c)}}function N(e,n){1&e&&k.Lb(0,"erz-spinner")}function H(e,n){if(1&e&&(k.Pb(0,"div"),k.Cc(1,T,5,4,"ng-container",1),k.ec(2,"async"),k.Cc(3,N,1,0,"ng-template",null,2,k.Dc),k.Ob()),2&e){var t=k.tc(4),c=k.dc();k.xb(1),k.jc("ngIf",!k.fc(2,2,c.openAbsencesService.loading$))("ngIfElse",t)}}var G,X=function(e,n,t){return{selection:e,entries:n,sortCriteria:t}},U=((G=function(){function e(n,t,c){o(this,e),this.openAbsencesService=n,this.selectionService=t,this.scrollPosition=c,this.destroy$=new d.a}return a(e,[{key:"ngOnInit",value:function(){this.openAbsencesService.currentDetail=null,this.selectionService.clearNonOpenAbsencesEntries()}},{key:"ngAfterViewInit",value:function(){this.scrollPosition.restore()}},{key:"ngOnDestroy",value:function(){this.destroy$.next()}},{key:"onCheckboxCellClick",value:function(e,n){e.target!==n&&n.click()}},{key:"getSortDirectionCharacter",value:function(e,n){return e.primarySortKey!==n?"":e.ascending?"\u2193":"\u2191"}},{key:"getLessonsCountKey",value:function(e){return"open-absences.list.content.lessonsCount."+(1===e.lessonsCount?"singular":"plural")}}]),e}()).\u0275fac=function(e){return new(e||G)(k.Kb(x),k.Kb(C.a),k.Kb(M.a))},G.\u0275cmp=k.Eb({type:G,selectors:[["erz-open-absences-list"]],decls:4,vars:11,consts:[[4,"erzLet"],[4,"ngIf","ngIfElse"],["loading",""],["noEntries",""],[1,"pt-3","pl-3","pr-3"],[1,"header-search","input-group"],[1,"input-group-prepend"],["id","search-addon",1,"input-group-text"],[1,"material-icons"],["type","text","aria-describedby","search-addon",1,"form-control",3,"keyup"],[1,"d-flex","align-items-center","justify-content-between","mt-1"],[1,"selection-count","pl-1"],["routerLink","/open-absences/confirm",1,"edit","btn","btn-primary","mt-1","mb-2"],[1,"content"],[1,"absence-header"],[3,"className","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"className","click"],[1,"sort-direction"],[1,"absence-entry"],[1,"checkbox",3,"click"],["type","checkbox",1,"form-check-input",3,"checked","change"],["checkbox",""],[1,"name","pr-2"],[3,"routerLink"],[1,"study-class"],[1,"lessons-count"],[1,"study-class-lessons-count"],[1,"days-ago"],[1,"date"],[1,"mt-3"]],template:function(e,n){1&e&&(k.Cc(0,H,5,4,"div",0),k.ec(1,"async"),k.ec(2,"async"),k.ec(3,"async")),2&e&&k.jc("erzLet",k.pc(7,X,k.fc(1,1,n.selectionService.selection$),k.fc(2,3,n.openAbsencesService.filteredEntries$),k.fc(3,5,n.openAbsencesService.sortCriteria$)))},directives:[S.a,j.m,l.g,j.l,$.a],pipes:[j.b,E.c,A.a,j.e],styles:['.content[_ngcontent-%COMP%]{padding-left:1.5rem;padding-right:1.5rem}.header-search[_ngcontent-%COMP%]   input.form-control[_ngcontent-%COMP%]{max-width:500px}.edit[_ngcontent-%COMP%]{line-height:1;font-size:2.2rem}.absence-header[_ngcontent-%COMP%]{cursor:pointer;grid-template-areas:"name date";-ms-grid-columns:5fr 1fr;grid-template-columns:5fr 1fr;border-top:1px solid #dee2e6;border-bottom:2px solid #dee2e6}.absence-entry[_ngcontent-%COMP%], .absence-header[_ngcontent-%COMP%]{padding:1.5rem;display:-ms-grid;display:grid}.absence-entry[_ngcontent-%COMP%]{border-bottom:1px solid #e9ecef;grid-template-areas:"checkbox name study-class lessons-count days-ago date";-ms-grid-columns:-webkit-min-content 2fr 1fr 1fr 1fr 1fr;-ms-grid-columns:min-content 2fr 1fr 1fr 1fr 1fr;grid-template-columns:-webkit-min-content 2fr 1fr 1fr 1fr 1fr;grid-template-columns:min-content 2fr 1fr 1fr 1fr 1fr}.checkbox[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:1;grid-area:checkbox;margin:0;padding:.6rem .75rem 0 0}.absence-all[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{padding-top:.2rem}.checkbox[_ngcontent-%COMP%]   input.form-check-input[_ngcontent-%COMP%]{position:static!important;margin:0!important;display:block}.name[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:1;grid-area:name;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.absence-entry[_ngcontent-%COMP%] > .name[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:2}.name[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#33333d}.lessons-count[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:4;grid-area:lessons-count}.study-class[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:3;grid-area:study-class}.study-class-lessons-count[_ngcontent-%COMP%]{grid-area:study-class-lessons-count;display:none}.days-ago[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:5;color:#6c757d;grid-area:days-ago}.date[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:2;grid-area:date}.absence-entry[_ngcontent-%COMP%] > .date[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:6}@media (max-width:750px){.content[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.absence-header[_ngcontent-%COMP%]{grid-template-areas:"name date";-ms-grid-columns:3fr 2fr;grid-template-columns:3fr 2fr}.absence-entry[_ngcontent-%COMP%]{grid-template-areas:"checkbox name date" "checkbox study-class-lessons-count days-ago";-ms-grid-columns:-webkit-min-content 3fr 2fr;-ms-grid-columns:min-content 3fr 2fr;grid-template-columns:-webkit-min-content 3fr 2fr;grid-template-columns:min-content 3fr 2fr}.study-class-lessons-count[_ngcontent-%COMP%]{display:block}.lessons-count[_ngcontent-%COMP%], .study-class[_ngcontent-%COMP%]{display:none}.days-ago[_ngcontent-%COMP%], .study-class-lessons-count[_ngcontent-%COMP%]{font-size:1.3125rem;color:#adb5bd}.checkbox[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-row-span:2}.checkbox[_ngcontent-%COMP%], .name[_ngcontent-%COMP%]{-ms-grid-column:1}.name[_ngcontent-%COMP%]{-ms-grid-row:1}.absence-entry[_ngcontent-%COMP%] > .name[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:2}.study-class-lessons-count[_ngcontent-%COMP%]{-ms-grid-row:2;-ms-grid-column:2}.days-ago[_ngcontent-%COMP%]{-ms-grid-row:2;-ms-grid-column:3}.date[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:2}.absence-entry[_ngcontent-%COMP%] > .date[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:3}}'],changeDetection:0}),G),Q=t("eIep"),q=t("1G5W"),J=t("pLZG"),V=t("K+0v"),Z=t("OvQW"),B=t("KJh6"),W=function(){return["/open-absences"]};function Y(e,n){if(1&e&&(k.Pb(0,"div",8),k.Pb(1,"button",9),k.Pb(2,"div",10),k.Pb(3,"i",11),k.Ec(4,"navigate_before"),k.Ob(),k.Pb(5,"span",12),k.Ec(6),k.ec(7,"async"),k.Ob(),k.Ob(),k.Ob(),k.Pb(8,"a",13),k.Pb(9,"i",11),k.Ec(10,"edit"),k.Ob(),k.Ob(),k.Ob()),2&e){var t=n.erzLet,c=k.dc();k.xb(1),k.jc("routerLink",k.mc(6,W)),k.xb(5),k.Fc(k.fc(7,4,c.studentFullName$)),k.xb(2),k.Cb("disabled",0===t.length)}}function ee(e,n){if(1&e&&(k.Pb(0,"div",25),k.Ec(1),k.Ob()),2&e){var t=k.dc().erzLet;k.xb(1),k.Gc(" ",t," ")}}function ne(e,n){if(1&e&&(k.Nb(0),k.Cc(1,ee,2,1,"div",24),k.Mb()),2&e){var t=n.erzLet;k.xb(1),k.jc("ngIf",t)}}function te(e,n){if(1&e){var t=k.Qb();k.Pb(0,"div",14),k.bc("click",(function(e){k.uc(t);var n=k.tc(3);return k.dc().onRowClick(e,n)})),k.Pb(1,"div",15),k.Pb(2,"input",16,17),k.bc("change",(function(){k.uc(t);var e=n.$implicit;return k.dc().selectionService.toggle(e)})),k.ec(4,"async"),k.Ob(),k.Ob(),k.Pb(5,"div",18),k.Ec(6),k.Ob(),k.Pb(7,"div",19),k.Ec(8),k.ec(9,"date"),k.ec(10,"date"),k.Ob(),k.Pb(11,"div",20),k.Ec(12),k.Ob(),k.Pb(13,"div",21),k.Ec(14),k.ec(15,"date"),k.ec(16,"date"),k.Ob(),k.Pb(17,"div",22),k.Ec(18),k.ec(19,"date"),k.ec(20,"date"),k.Ob(),k.Cc(21,ne,2,1,"ng-container",23),k.ec(22,"async"),k.Ob()}if(2&e){var c=n.$implicit,r=k.dc();k.xb(2),k.jc("checked",k.fc(4,12,r.selectionService.isSelected$(c))),k.xb(4),k.Hc(" ",c.EventDesignation,", ",c.StudyClassNumber," "),k.xb(2),k.Hc(" ",k.gc(9,14,c.LessonDateTimeFrom,"HH:mm"),"\u2013",k.gc(10,17,c.LessonDateTimeTo,"HH:mm")," "),k.xb(4),k.Gc(" ",c.TeacherInformation," "),k.xb(2),k.Hc(" ",k.gc(15,20,c.LessonDateTimeFrom,"HH:mm"),"\u2013",k.gc(16,23,c.LessonDateTimeTo,"HH:mm")," "),k.xb(4),k.Ic(" ",k.gc(19,26,c.LessonDateTimeFrom,"HH:mm"),"\u2013",k.gc(20,29,c.LessonDateTimeTo,"HH:mm"),", ",c.TeacherInformation," "),k.xb(3),k.jc("erzLet",k.fc(22,32,r.getPresenceTypeDesignation(c)))}}var ce,re,ie,oe=[{path:"",component:_,children:[{path:"",component:U,data:{restoreScrollPositionFrom:["/open-absences/detail/:personId/:date","/open-absences/confirm"]}},{path:"detail/:personId/:date",component:(ce=function(){function e(n,t,c,i,s,a){o(this,e),this.router=n,this.route=t,this.openAbsencesService=c,this.presenceTypesService=i,this.selectionService=s,this.scrollPosition=a,this.absences$=this.route.paramMap.pipe(Object(Q.a)(this.getAbsencesForParams.bind(this))),this.hasAbsences$=this.absences$.pipe(Object(m.a)(Object(V.c)(1))),this.studentFullName$=this.absences$.pipe(Object(m.a)((function(e){return e[0]&&e[0].StudentFullName||null}))),this.allSelected$=Object(g.a)([this.absences$,this.selectionService.selection$]).pipe(Object(m.a)((function(e){var n=r(e,2),t=n[0],c=n[1];return t.length===c.length}))),this.destroy$=new d.a}return a(e,[{key:"ngOnInit",value:function(){var e=this;this.selectionService.clearNonLessonPresences(),this.route.paramMap.pipe(Object(q.a)(this.destroy$)).subscribe((function(n){return e.openAbsencesService.currentDetail={date:String(n.get("date")),personId:Number(n.get("personId"))}})),this.hasAbsences$.pipe(Object(q.a)(this.destroy$),Object(J.a)(Object(Z.not)(V.b))).subscribe((function(){return e.router.navigate(["/open-absences"])}))}},{key:"ngAfterViewInit",value:function(){this.scrollPosition.restore()}},{key:"ngOnDestroy",value:function(){this.destroy$.next()}},{key:"toggleAll",value:function(e){var n=this;e?this.absences$.pipe(Object(p.a)(1)).subscribe((function(e){return n.selectionService.clear(e)})):this.selectionService.clear()}},{key:"onRowClick",value:function(e,n){e.target!==n&&n.click()}},{key:"getPresenceTypeDesignation",value:function(e){return this.presenceTypesService.displayedTypes$.pipe(Object(m.a)((function(n){var t;return e.TypeRef.Id&&(null===(t=n.find((function(n){return n.Id===e.TypeRef.Id})))||void 0===t?void 0:t.Designation)||null})))}},{key:"getAbsencesForParams",value:function(e){return this.openAbsencesService.getUnconfirmedAbsences(String(e.get("date")),Number(e.get("personId")))}}]),e}(),ce.\u0275fac=function(e){return new(e||ce)(k.Kb(l.e),k.Kb(l.a),k.Kb(x),k.Kb(B.a),k.Kb(C.a),k.Kb(M.a))},ce.\u0275cmp=k.Eb({type:ce,selectors:[["erz-open-absences-detail"]],decls:13,vars:12,consts:[["class","d-flex align-items-center justify-content-between",4,"erzLet"],[1,"content"],[1,"absence-all"],[1,"checkbox",3,"click"],["id","all-checkbox","type","checkbox",1,"form-check-input",3,"checked","change"],["allCheckbox",""],["for","all-checkbox",1,"all"],["class","absence-entry",3,"click",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center","justify-content-between"],["type","button",1,"back","btn","btn-link","p-3",3,"routerLink"],[1,"d-flex","align-items-center"],[1,"material-icons"],[1,"ml-3"],["routerLink","/open-absences/confirm",1,"edit","btn","btn-primary","mt-1","mb-2","mr-3"],[1,"absence-entry",3,"click"],[1,"checkbox"],["type","checkbox",1,"form-check-input",3,"checked","change"],["checkbox",""],[1,"lesson-class"],[1,"time","pr-2"],[1,"teacher"],[1,"time"],[1,"time-teacher"],[4,"erzLet"],["class","presence-type",4,"ngIf"],[1,"presence-type"]],template:function(e,n){if(1&e){var t=k.Qb();k.Cc(0,Y,11,7,"div",0),k.ec(1,"async"),k.Pb(2,"div",1),k.Pb(3,"div",2),k.Pb(4,"div",3),k.bc("click",(function(e){k.uc(t);var c=k.tc(6);return n.onRowClick(e,c)})),k.Pb(5,"input",4,5),k.bc("change",(function(e){return n.toggleAll(e.target.checked)})),k.ec(7,"async"),k.Ob(),k.Ob(),k.Pb(8,"label",6),k.Ec(9),k.ec(10,"translate"),k.Ob(),k.Ob(),k.Cc(11,te,23,34,"div",7),k.ec(12,"async"),k.Ob()}2&e&&(k.jc("erzLet",k.fc(1,4,n.selectionService.selection$)),k.xb(5),k.jc("checked",k.fc(7,6,n.allSelected$)),k.xb(4),k.Fc(k.fc(10,8,"open-absences.detail.all")),k.xb(2),k.jc("ngForOf",k.fc(12,10,n.absences$)))},directives:[S.a,j.l,l.f,l.g,j.m],pipes:[j.b,E.c,j.e],styles:['.content[_ngcontent-%COMP%]{padding-left:1.5rem;padding-right:1.5rem}.back[_ngcontent-%COMP%]{color:#33333d;text-decoration:none}.back[_ngcontent-%COMP%]:active   span[_ngcontent-%COMP%], .back[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{text-decoration:underline}.edit[_ngcontent-%COMP%]{line-height:1;font-size:2.2rem}.absence-all[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid #e9ecef;display:-ms-grid;display:grid;grid-template-areas:"checkbox all";-ms-grid-columns:-webkit-min-content 1fr;-ms-grid-columns:min-content 1fr;grid-template-columns:-webkit-min-content 1fr;grid-template-columns:min-content 1fr}.absence-all[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{-ms-grid-row-align:center;align-self:center}.absence-entry[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid #e9ecef;display:-ms-grid;display:grid;grid-template-areas:"checkbox lesson-class time teacher" "checkbox presence-type presence-type presence-type";-ms-grid-columns:-webkit-min-content 3fr 1fr 1fr;-ms-grid-columns:min-content 3fr 1fr 1fr;grid-template-columns:-webkit-min-content 3fr 1fr 1fr;grid-template-columns:min-content 3fr 1fr 1fr}.checkbox[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:1;grid-area:checkbox;margin:0;padding:.6rem .75rem 0 0}.absence-entry[_ngcontent-%COMP%] > .checkbox[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-row-span:2;-ms-grid-column:1}.absence-all[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{padding-top:.2rem}.checkbox[_ngcontent-%COMP%]   input.form-check-input[_ngcontent-%COMP%]{position:static!important;margin:0!important;display:block}.all[_ngcontent-%COMP%]{grid-area:all}.all[_ngcontent-%COMP%], .lesson-class[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:2}.lesson-class[_ngcontent-%COMP%]{grid-area:lesson-class;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.time[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:3;grid-area:time}.teacher[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:4;grid-area:teacher}.time-teacher[_ngcontent-%COMP%]{grid-area:time-teacher;display:none}.presence-type[_ngcontent-%COMP%]{-ms-grid-row:2;-ms-grid-column:2;-ms-grid-column-span:3;color:#adb5bd;grid-area:presence-type}@media (max-width:750px){.content[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.absence-all[_ngcontent-%COMP%]{grid-template-areas:"checkbox all";-ms-grid-columns:-webkit-min-content 1fr;-ms-grid-columns:min-content 1fr;grid-template-columns:-webkit-min-content 1fr;grid-template-columns:min-content 1fr}.absence-entry[_ngcontent-%COMP%]{grid-template-areas:"checkbox lesson-class" "checkbox time-teacher" "checkbox presence-type";-ms-grid-columns:-webkit-min-content 1fr;-ms-grid-columns:min-content 1fr;grid-template-columns:-webkit-min-content 1fr;grid-template-columns:min-content 1fr}.time-teacher[_ngcontent-%COMP%]{display:block}.teacher[_ngcontent-%COMP%], .time[_ngcontent-%COMP%]{display:none}.checkbox[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-row-span:1;-ms-grid-column:1}.absence-entry[_ngcontent-%COMP%] > .checkbox[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-row-span:3;-ms-grid-column:1}.all[_ngcontent-%COMP%], .lesson-class[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:2}.time-teacher[_ngcontent-%COMP%]{-ms-grid-row:2;-ms-grid-column:2}.presence-type[_ngcontent-%COMP%]{-ms-grid-row:3;-ms-grid-column:2;-ms-grid-column-span:1}}'],changeDetection:0}),ce),data:{restoreScrollPositionFrom:["/open-absences/confirm"]}},{path:"confirm",component:t("hH5/").a}]}],se=((ie=function e(){o(this,e)}).\u0275mod=k.Ib({type:ie}),ie.\u0275inj=k.Hb({factory:function(e){return new(e||ie)},imports:[[l.h.forChild(oe)],l.h]}),ie),ae=((re=function e(){o(this,e)}).\u0275mod=k.Ib({type:re}),re.\u0275inj=k.Hb({factory:function(e){return new(e||re)},imports:[[s.a,se]]}),re)},yl8S:function(t,c,r){"use strict";r.d(c,"a",(function(){return x}));var i,s=r("tyNb"),l=r("XNiG"),u=r("LRne"),d=r("pLZG"),b=r("lJxs"),g=r("IzEk"),f=r("5+tZ"),m=r("eIep"),p=r("Y6wi"),h=r("UXun"),y=r("1G5W"),O=r("7o/Q"),v=function(){function e(n){o(this,e),this.total=n}return a(e,[{key:"call",value:function(e,n){return n.subscribe(new P(e,this.total))}}]),e}(),P=function(t){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&e(n,t)}(r,t);var c=n(r);function r(e,n){var t;return o(this,r),(t=c.call(this,e)).total=n,t.count=0,t}return a(r,[{key:"_next",value:function(e){++this.count>this.total&&this.destination.next(e)}}]),r}(O.a),C=r("fXoL"),k=r("ofXK"),x=((i=function(){function e(n,t){var c=this;o(this,e),this.router=n,this.viewportScroller=t,this.scrollPositions={},this.previousRoute=null,this.currentRoute=null,this.currentScrollPosition=[0,0],this.destroy$=new l.a,this.scrollPosition$=this.router.events.pipe(Object(d.a)(_),Object(b.a)(this.getScrollPosition.bind(this))),this.activationEnd$=this.router.events.pipe(Object(d.a)(w)),this.navigationEnd$=this.router.events.pipe(Object(d.a)(M)),this.route$=this.activationEnd$.pipe(Object(g.a)(1)).pipe(Object(f.a)((function(e){return[Object(u.a)(e),c.navigationEnd$.pipe(Object(m.a)((function(){return c.activationEnd$.pipe(Object(g.a)(1))})))]})),Object(p.a)(),Object(b.a)((function(e){return e.snapshot})),Object(h.a)(1)),this.scrollPosition$.pipe(Object(y.a)(this.destroy$)).subscribe((function(e){return c.currentScrollPosition=e})),this.route$.pipe(Object(y.a)(this.destroy$)).subscribe((function(e){c.previousRoute=c.currentRoute,c.currentRoute=e}))}return a(e,[{key:"ngOnDestroy",value:function(){this.destroy$.next()}},{key:"restore",value:function(){var e=this;if(this.currentRoute&&this.requiresStoring(this.currentRoute)){if(this.previousRoute&&this.shouldStoreFor(this.currentRoute,this.previousRoute)){var n=this.getPath(this.currentRoute);this.scrollToPosition(this.scrollPositions[n]||[0,0])}var t=this.currentRoute;this.route$.pipe((function(e){return e.lift(new v(1))}),Object(g.a)(1),Object(y.a)(this.destroy$),Object(d.a)((function(n){return e.shouldStoreFor(t,n)}))).subscribe((function(){var n=e.getPath(t);e.scrollPositions[n]=e.currentScrollPosition}))}}},{key:"getScrollPosition",value:function(){return this.viewportScroller.getScrollPosition()}},{key:"scrollToPosition",value:function(e){this.viewportScroller.scrollToPosition(e)}},{key:"getPath",value:function(e){return e?"/"+e.pathFromRoot.map((function(e){return e.routeConfig&&e.routeConfig.path})).filter((function(e){return e})).join("/"):"/"}},{key:"requiresStoring",value:function(e){return Boolean(e&&e.routeConfig&&e.routeConfig.data&&Array.isArray(e.routeConfig.data.restoreScrollPositionFrom)&&e.routeConfig.data.restoreScrollPositionFrom.length>0)}},{key:"shouldStoreFor",value:function(e,n){return(e&&e.routeConfig&&e.routeConfig.data&&Array.isArray(e.routeConfig.data.restoreScrollPositionFrom)?e.routeConfig.data.restoreScrollPositionFrom:[]).includes(this.getPath(n))}}]),e}()).\u0275fac=function(e){return new(e||i)(C.Xb(s.e),C.Xb(k.t))},i.\u0275prov=C.Gb({token:i,factory:i.\u0275fac,providedIn:"root"}),i);function w(e){return e instanceof s.b}function _(e){return e instanceof s.d}function M(e){return e instanceof s.c}}}])}();